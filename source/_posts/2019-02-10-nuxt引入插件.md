---
layout: post
title: nuxt服务端渲染如何引入插件
date: 2019-01-02
categories: blog
tags: [服务端渲染, 前端, plugin]
description: plugin
---

# 前言

在开发的过程中有时候需要引入自己的方法库或者一些第三方的插件，服务端渲染不同于简单的 SPA 项目，在引入插件的过程中有一些需要值得注意

> 第三方插件凡是 mounted 中实例化的，是不可以直接使用的，在 vue 的生命周期内，只有`beforeCreate` 和 `created` 这两个方法会在 客户端和服务端被调用。其他生命周期函数仅在客户端被调用。

## 使用第三方包的方法

- 自定义头像： [cropperJS](https://hewaller.github.io/blog/2018/11/02/cropperJs/)
- 使用 `nuxt` 配置，使第三方包只在客服端被调用，在服务端不被调用

  > 不支持 ssr 的系统，插件只在浏览器里使用，这种情况下下，你可以用 ssr: false ，使得插件只会在客户端运行。

  ```js
  // nuxt.config.js
  plugins: [{ src: '~plugins/vue-awesome-swiper.js', ssr: false }]

  // plugins/vue-awesome-swiper.js
  import Vue from 'vue'
  // require styles
  import 'swiper/dist/css/swiper.css'
  if (process.browser) {
    const VueAwesomeSwiper = require('vue-awesome-swiper/dist/ssr')
    Vue.use(VueAwesomeSwiper)
  }
  ```

  可以通过检测 `process.server` 这个变量来控制插件中的某些脚本库只在服务端使用。当值为 `true` 表示是当前执行环境为服务器中。 此外，可以通过检查 `process.static` 是否为 `true` 来判断应用是否通过 `nuxt generator` 生成。您也可以组合 `process.server` 和 `process.static` 这两个选项，确定当前状态为服务器端渲染且使用 `nuxt generate` 命令运行。

  最后更新日期 2019-01-03
