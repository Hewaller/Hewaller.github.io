---
layout: post
title: Ant design Vue
date: 2019-03-07
categories: blog
tags: [antd, UI, table]
description: ant-design-UI框架
---

# 初期使用感受

## element-UI 和 Ant Design Vue 的区别

我司现在和以前的后台主要 UI 框架是 `element-ui`，在 `Ant Design Vue` 官宣之前就一直在关注，但是由于项目时间的不允许和 UI 框架稳定性的多方面考虑，一直都没机会尝试使用 `antd` 来搭建一个新的后台模版。

## table

### 基本功能

自带分页、搜索、排序、自定义操作等功能
使用 slot 插入其他组件、展示数据

### 日常使用参数

```html
<a-table
  :columns="columns"
  rowKey="id"
  :dataSource="data"
  :pagination="pagination"
  @change="handleTableChange"
>
  <template #cover_url="cover_url">
    <my-image :src="cover_url"></my-image>
  </template>

  <template #has_pano_new="has_pano_new">
    <span>{{has_pano_new ? '有全景': '没有全景'}}</span>
  </template>

  <template #action="text, record">
    <my-button
      @click="changeStatus(record)"
      :status="record.status"
    ></my-button>
    <my-button @click="toEdit(record)" ghost type="edit"></my-button>
    <my-button @click="remove(record)" ghost type="remove"></my-button>
  </template>
</a-table>
```

```js
data() {
    return {
        data: [
             {
              title: '操作',
              dataIndex: 'action',
              scopedSlots: { customRender: 'action' }
            }
        ]
    }
}
```

> 参数：

    columns: 表格每行的数据和定义表头
    dataSource： 表格全部数据，dataSource 和 columns 里的数据值都需要指定 key 值。对于 dataSource 默认将每列数据的 key 属性作为唯一的标识。
    rowKey: 每行单独的key，必须值，不可重复和不赋值，一般为id
    pagination: 表格自带的分页，接受一个Obj对象
    handleTableChange： 翻页触发的回调

> slot  
> `#action="text, record"` 相当于`v-slot:action="text,record"`  
> `slot`中包含两个参数，第一个是当前列的值，参照`cover_url`，`record`代表的是当前行对应的值，相等于`elment-ui`中`scope.row`，都可以取得当前行的所有数据

### 排序和筛选

不需要指定具体的 onFilter 和 sorter 函数，而是在把筛选和排序的参数发到服务端来处理。
也可以通过 slot 来自定义筛选功能

```js
    [
        { title: 'Name',
          dataIndex: 'name',
          sorter: true,
          width: '20%',
          scopedSlots: { customRender: 'name' }
        },
        {
            title: 'Gender',
            dataIndex: 'gender',
            filters: [
              { text: 'Male', value: 'male' },
              { text: 'Female', value: 'female' },
            ],
            width: '20%',
        }
    ]

    handleTableChange (pagination, filters, sorter) {
        // do something
    }
```

最后更新日期 2019-03-09
